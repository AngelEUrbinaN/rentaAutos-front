<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rentar</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="./css/finalizar.css">
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-custom shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Auto Renta</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./perfil.html">Perfil</a>
                </li>
                <button class="btn btn-outline-light ms-3" type="button" onclick="logout()">Cerrar Sesión</button>
            </ul>
        </div>
    </div>
  </nav>
  
  <section class="content-section">
    <div class="container-fluid h-custom">
      <div class="row d-flex justify-content-center align-items-center min-vh-100">
        <div class="col-md-9 col-lg-6 col-xl-5">
          <img src="" id="imgAuto" class="img-fluid" alt="Imagen del Auto">
          <!-- Tarjeta de detalles del coche -->
          <div class="card mt-4">
            <div class="card-body">
              <h5 class="card-title text-center">Detalles del Coche</h5>
              <hr>
              <!-- Inputs para desplegar la informacion del carro-->
              <!-- Asientos -->
              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="asientos">Asientos</label>
                <input type="text" id="asientos" class="form-control form-control-lg" name="asientos" readonly/>
              </div>

              <!-- CostoDia -->
              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="costoDiaNH">Costo por Día</label>
                <input type="text" id="costoDiaNH" class="form-control form-control-lg" name="costoDiaNH" readonly/>
              </div>

              <!-- Modelo -->
              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="modelo">Modelo</label>
                <input type="text" id="modelo" class="form-control form-control-lg" name="modelo" readonly/>
              </div>

              <!-- Localización -->
              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="localizacion">Localización</label>
                <input type="text" id="localizacion" class="form-control form-control-lg" name="localizacion" readonly/>
              </div>

              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="transmision">Transmisión</label>
                <input type="text" id="transmision" class="form-control form-control-lg" name="transmision" readonly/>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
          <!-- Tarjeta de detalles de renta -->
          <div class="card">
            <div class="card-body">
              <h5 class="card-title text-center">Detalles de Renta</h5>
              <hr>
              <form id="finalizarForm" method="POST" action="../rentaAutos-back/index.php">
                <input type="hidden" name="accion" value="finalizar">
                <input type="hidden" name="id" id="id">
                <input type="hidden" name="idAuto" id="idAuto">

                <!-- Fecha de inicio  -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="diaInicio">Fecha de Inicio</label>
                  <input type="date" id="diaInicio" class="form-control form-control-lg" name="diaInicio" readonly/>
                </div>

                <!-- Fecha de fin establecida -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="diaFin">Fecha de Fin</label>
                  <input type="date" id="diaFin" class="form-control form-control-lg" name="diaFin" readonly/>
                </div>

                <!-- Fin real -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="finReal">Fin Real</label>
                  <input type="date" id="finReal" class="form-control form-control-lg" name="finReal" readonly/>
                </div>

                <!-- Costo estimado -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="costoEstimado">Costo Estimado</label>
                  <input type="text" id="costoEstimado" class="form-control form-control-lg" name="costoEstimado" readonly/>
                </div>

                <!-- Costo real -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="costoReal">Costo Real</label>
                  <input type="text" id="costoReal" class="form-control form-control-lg" name="costoReal" readonly/>
                </div>
              </form>

              <!-- Multa -->
              <div data-mdb-input-init class="form-outline mb-4">
                <label class="form-label" for="multa">Multa (Entrega tardía o temprana por día)</label>
                <input type="text" id="multa" class="form-control form-control-lg" name="multa" readonly/>
              </div>
              
              <!-- Form para registrar el pago -->
              <form id="pagarForm" method="POST" action="../rentaAutos-back/index.php" class="mt-4">
                <input type="hidden" name="accion" value="pagar">

                <!-- ID Renta -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <input type="hidden" id="idRenta" class="form-control form-control-lg" name="idRenta"/>
                </div>

                <!-- Monto -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="monto">Monto</label>
                  <input type="text" id="monto" class="form-control form-control-lg" name="monto" readonly required />
                </div>

                <!-- Fecha -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="fecha">Fecha</label>
                  <input type="date" id="fecha" class="form-control form-control-lg" name="fecha" readonly required />
                </div>

                <!-- Metodo -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <label class="form-label" for="metodo">Método</label>
                  <select id="metodo" class="form-control form-control-lg" name="metodo" onchange="mostrarCamposAdicionales()" required>
                    <option value="" disabled selected>Seleccione un método</option>
                    <option value="Mercado Pago">Mercado Pago</option>
                    <option value="VISA">VISA</option>
                    <option value="MasterCard">MasterCard</option>
                    <option value="Paypal">Paypal</option>
                    <option value="Efectivo">Efectivo</option>
                  </select>
                </div>

                <!-- Campos adicionales -->
                <div id="camposAdicionales"></div>

                <div class="text-end mt-4 pt-2">
                  <button type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg" value="Pagar">
                    Finalizar Renta
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form para buscar la informacion completa de la renta-->
  <form id="idFormRenta" method="POST" style="display: none;">
      <input type="hidden" name="accion" id="accion">
      <input type="hidden" name="rentaID" id="rentaID">
  </form>

  <!-- Form para buscar la informacion completa del carro-->
  <form id="idFormAuto" method="POST" style="display: none;">
    <input type="hidden" name="accion" id="accionAuto">
    <input type="hidden" name="autID" id="autID">
  </form>

  <!-- Footer -->
  <footer class="footer mt-auto py-3 bg-dark text-white">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h5>Auto Renta</h5>
                <ul class="list-unstyled">
                    <li><a href="./home.html" class="text-white">Home</a></li>
                    <li><a href="./perfil.html" class="text-white">Perfil</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Enlaces Útiles</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-white">Términos y Condiciones</a></li>
                    <li><a href="#" class="text-white">Política de Privacidad</a></li>
                    <li><a href="#" class="text-white">Ayuda</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h5>Contacta con Nosotros</h5>
                <p>N°123 Calle Benito Juarez, salamanca, Mexico</p>
                <p>Email: info@autorenta.com</p>
                <p>Teléfono: +123 456 7890</p>
            </div>
        </div>
        <div class="text-center">
            <p class="mb-0">&copy; 2024 Auto Renta. Todos los derechos reservados.</p>
        </div>
    </div>
  </footer>

  <script src="./js/finalizar.js"></script>
  <script>
    function mostrarCamposAdicionales() {
      const metodo = document.getElementById('metodo').value;
      const camposAdicionales = document.getElementById('camposAdicionales');
      camposAdicionales.innerHTML = '';

      if (metodo === 'MasterCard') {
        camposAdicionales.innerHTML = `
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="numeroTarjeta">Número de Tarjeta</label>
            <input type="text" id="numeroTarjeta" class="form-control form-control-lg" name="numeroTarjeta" required pattern="\\d{16}" />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="nombreTarjeta">Propietario de la tarjeta</label>
            <input type="text" id="nombreTarjeta" class="form-control form-control-lg" name="nombreTarjeta" required />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="cvv">CVV</label>
            <input type="text" id="cvv" class="form-control form-control-lg" name="cvv" required pattern="\\d{3}" />
          </div>
        `;
      } else if (metodo === 'VISA') {
        camposAdicionales.innerHTML = `
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="numeroTarjeta">Número de Tarjeta</label>
            <input type="text" id="numeroTarjeta" class="form-control form-control-lg" name="numeroTarjeta" required pattern="\\d{16}" />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="nombreTarjeta">Propietario de la tarjeta</label>
            <input type="text" id="nombreTarjeta" class="form-control form-control-lg" name="nombreTarjeta" required />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="cvv">CVV</label>
            <input type="text" id="cvv" class="form-control form-control-lg" name="cvv" required pattern="\\d{3}" />
          </div>
        `;
      } else if (metodo === 'Paypal') {
        camposAdicionales.innerHTML = `
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="correoPaypal">Correo de Paypal</label>
            <input type="email" id="correoPaypal" class="form-control form-control-lg" name="correoPaypal" required pattern="^[a-zA-Z0-9._%+-]+@gmail\\.com$" />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="passwordPaypal">Password</label>
            <input type="password" id="passwordPaypal" class="form-control form-control-lg" name="passwordPaypal" required />
          </div>
        `;
      } else if (metodo === 'Mercado Pago') {
        camposAdicionales.innerHTML = `
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="correoMercado">Correo de Mercado Pago</label>
            <input type="email" id="correoMercado" class="form-control form-control-lg" name="correoMercado" required pattern="^[a-zA-Z0-9._%+-]+@gmail\\.com$" />
          </div>
          <div data-mdb-input-init class="form-outline mb-4">
            <label class="form-label" for="passwordMercado">Password</label>
            <input type="password" id="passwordMercado" class="form-control form-control-lg" name="passworMercado" required />
          </div>
        `;
      } else if (metodo === 'Efectivo') {
      }
    }

    // Asegúrate de que esta función se llame cuando se cambie el valor del método de pago
    document.getElementById('metodo').addEventListener('change', mostrarCamposAdicionales);
  </script>
</body>
</html>
